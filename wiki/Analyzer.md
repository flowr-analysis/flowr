_This document was generated from '[src/documentation/print-analyzer-wiki.ts](https://github.com/flowr-analysis/flowr/tree/main//src/documentation/print-analyzer-wiki.ts)' on 2025-11-20, 14:02:17 UTC presenting an overview of flowR's analyzer (v2.6.2, using R v4.5.1). Please do not edit this file/wiki page directly._


> [!NOTE]
> We are currently working on documenting the capabilities of the analyzer (with the plugins, their loading order, etc.). 
> In general, the code documentation starting with the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer.ts#L134"><code><span title="Central class for conducting analyses with FlowR. Use the FlowrAnalyzerBuilder to create a new instance.  If you want the original pattern of creating a pipeline and running all steps, you can still do this with FlowrAnalyzer#runFull .  To inspect the context of the analyzer, use FlowrAnalyzer#inspectContext (if you are a plugin and need to modify it, use FlowrAnalyzer#context instead).">FlowrAnalyzer</span></code></a> and the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L37"><code><span title="Builder for the FlowrAnalyzer , use it to configure all analysis aspects before creating the analyzer instance with .build() or .buildSync() .  You can add new files and folders to analyze using the .addRequest() method on the resulting analyzer.">FlowrAnalyzerBuilder</span></code></a>
> should be the best starting point.


- [Overview](#Overview)
- [Builder Configuration](#Builder_Configuration)
  - [Configuring flowR](#Configuring_flowR)  
  - [Configuring the Engine](#Configuring_the_Engine)  
  - [Configuring Plugins](#Configuring_Plugins)  
  - [Builder Reference](#Builder_Reference)  
- [Plugins](#Plugins)
  - [Plugin Types](#Plugin_Types)  
    [Dependency Identification](#Dependency_Identification), [Project Discovery](#Project_Discovery), [File Loading](#File_Loading), and [Loading Order](#Loading_Order)
  - [How to add a new plugin](#How_to_add_a_new_plugin)  
  - [How to add a new plugin type](#How_to_add_a_new_plugin_type)  
- [Caching](#Caching)
- [Context Information](#Context_Information)
  - [Files Context](#Files_Context)  
  - [Loading Order Context](#Loading_Order_Context)  
  - [Dependencies Context](#Dependencies_Context)  
  - [Environment Context](#Environment_Context)  
- [Analyzer Internals](#Analyzer_Internals)



<h2 id="Overview">Overview</h2>

No matter whether you want to analyze a single R script, a couple of R notebooks, a complete project, or an R package,
your journey starts with the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L37"><code><span title="Builder for the FlowrAnalyzer , use it to configure all analysis aspects before creating the analyzer instance with .build() or .buildSync() .  You can add new files and folders to analyze using the .addRequest() method on the resulting analyzer.">FlowrAnalyzerBuilder</span></code></a> (further described in [Builder Configuration](#builder-configuration) below).
This builder allows you to configure the analysis in many different ways, for example, by specifying which [plugins](#Plugins) to use or
what [engine](https://github.com/flowr-analysis/flowr/wiki/Engines) to use for the analysis.

When building the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer.ts#L134"><code><span title="Central class for conducting analyses with FlowR. Use the FlowrAnalyzerBuilder to create a new instance.  If you want the original pattern of creating a pipeline and running all steps, you can still do this with FlowrAnalyzer#runFull .  To inspect the context of the analyzer, use FlowrAnalyzer#inspectContext (if you are a plugin and need to modify it, use FlowrAnalyzer#context instead).">FlowrAnalyzer</span></code></a> instance, the builder will take care to

* load the [requested plugins](#Plugins)
* setup an initial [context](#Context_Information) 
* create a [cache](#Caching) for speeding up future analyses
* initialize the [engine](https://github.com/flowr-analysis/flowr/wiki/Engines) (e.g., TreeSitter) if needed

The builder provides two methods for building the analyzer:
* <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L142"><code><span title="Create the FlowrAnalyzer instance using the given information. Please note that the only reason this is async is that if no parser is set, we need to retrieve the default engine instance which is an async operation. If you set the parser using FlowrAnalyzerBuilder#setParser ,">FlowrAnalyzerBuilder::<b>build</b></span></code></a>\
  for an asynchronous build process that also initializes the engine if needed
* <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L154"><code><span title="Synchronous version of FlowrAnalyzerBuilder#build , please only use this if you have set the parser using FlowrAnalyzerBuilder#setParser before, otherwise an error will be thrown.">FlowrAnalyzerBuilder::<b>buildSync</b></span></code></a>\
  for a synchronous build process,
  which requires that the engine (e.g., TreeSitter) has already been initialized before calling this method.
  Yet, as Engines only have to be initialized once per process, this method is often more convenient to use.

For more information on how to configure the builder, please refer to the [Builder Configuration](#builder-configuration) section below.

Once you have created an analyzer instance, you can add R files, folders, or even entire projects for analysis using the
<a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer.ts#L177"><code>addRequest</code></a> method.
All loaded [plugins](#Plugins) will be applied fully automatically during the analysis.
Please note that adding new files _after_ you already requested analysis results may cause bigger invalidations and cause re-analysis of previously analyzed files.
With the [files context](#Files_Context), you can also add virtual files to the analysis to consider, or *overwrite* existing files with modified content.
For this, have a look at the
<a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer.ts#L193"><code>addFile</code></a> method. 


> [!NOTE]
> If you want to quickly try out the analyzer, you can use the following code snippet that analyzes a simple R expression:
> 	
> 
> ```ts
> const analyzer = await new FlowrAnalyzerBuilder()
>     .setEngine('tree-sitter')
>     .build();
> // register a simple inline text-file for analysis
> analyzer.addRequest('x <- 1; print(x)');
> // get the dataflow
> const df = await analyzer.dataflow();
> // obtain the identified loading order
> console.log(analyzer.inspectContext().files.loadingOrder.getLoadingOrder());
> // run a dependency query
> const results = await analyzer.query([{ type: 'dependencies' }]);
> ```
> 
> 		
 

In general, we work on providing a set of example repositories that demonstrate how to use the analyzer in different scenarios:

* [flowr-analysis/sample-analyzer-project-query](https://github.com/flowr-analysis/sample-analyzer-project-query) for an example project that runs queries on an R project
* [flowr-analysis/sample-analyzer-df-diff](https://github.com/flowr-analysis/sample-analyzer-df-diff) for an example project that compares dataflows graphs

<h2 id="Builder_Configuration">Builder Configuration</h2>

If you are interested in all available options, have a look at the [Builder Reference](#builder-reference) below.
The following sections highlight some of the most important configuration options:
1. How to [configure flowR](#configuring-flowr)
1. How to [configure the engine](#configuring-the-engine)
2. How to [register plugins](#configuring-plugins)

<h3 id="Configuring_flowR">Configuring flowR</h3>

You can fundamentally change the behavior of flowR using the [config file](https://github.com/flowr-analysis/flowr/wiki/Interface#configuring-flowr),
embedded in the interface <a href="https://github.com/flowr-analysis/flowr/tree/main//src/config.ts#L92"><code>FlowrConfigOptions</code></a>.
With the builder you can either provide a complete configuration or amend the default configuration using:

* <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L72"><code><span title="Overwrite the configuration used by the resulting analyzer.">FlowrAnalyzerBuilder::<b>setConfig</b></span></code></a> to set a complete configuration
* <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L63"><code><span title="Apply an amendment to the configuration the builder currently holds. Per default, the defaultConfigOptions are used.">FlowrAnalyzerBuilder::<b>amendConfig</b></span></code></a> to amend the default configuration

By default, the builder uses flowR's standard configuration obtained with <a href="https://github.com/flowr-analysis/flowr/tree/main//src/config.ts#L225"><code>defaultConfigOptions</code></a>.

<h3 id="Configuring_the_Engine">Configuring the Engine</h3>

FlowR supports multiple [engines](https://github.com/flowr-analysis/flowr/wiki/Engines) for parsing and analyzing R code.
With the builder, you can select the engine to use with:

* <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L91"><code><span title="Set the engine and hence the parser that will be used by the analyzer. This is an alternative to FlowrAnalyzerBuilder#setParser if you do not have a parser instance at hand.">FlowrAnalyzerBuilder::<b>setEngine</b></span></code></a> to set the desired engine.
* <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L82"><code><span title="Set the parser instance used by the analyzer. This is an alternative to FlowrAnalyzerBuilder#setEngine if you already have a parser instance. Please be aware, that if you want to parallelize multiple analyzers, there should be separate parser instances.">FlowrAnalyzerBuilder::<b>setParser</b></span></code></a> to set a specific parser implementation.

By default, the builder uses the TreeSitter engine with the TreeSitter parser.
The builder also takes care to initialize the engine if needed during the asynchronous build process
with <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L142"><code><span title="Create the FlowrAnalyzer instance using the given information. Please note that the only reason this is async is that if no parser is set, we need to retrieve the default engine instance which is an async operation. If you set the parser using FlowrAnalyzerBuilder#setParser ,">FlowrAnalyzerBuilder::<b>build</b></span></code></a>.
If you want to use the synchronous build process with <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L154"><code><span title="Synchronous version of FlowrAnalyzerBuilder#build , please only use this if you have set the parser using FlowrAnalyzerBuilder#setParser before, otherwise an error will be thrown.">FlowrAnalyzerBuilder::<b>buildSync</b></span></code></a>,
please ensure that the engine has already been initialized before calling this method.

<h3 id="Configuring_Plugins">Configuring Plugins</h3>

There are various ways for you to register plugins with the builder, exemplified by the following snippet
relying on the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L112"><code><span title="Register one or multiple additional plugins. For the default plugin set, please refer to FlowrAnalyzerPluginDefaults , they can be registered by passing true to the FlowrAnalyzerBuilder constructor.">FlowrAnalyzerBuilder::<b>registerPlugins</b></span></code></a> method:


```ts
const analyzer = await new FlowrAnalyzerBuilder(false)
    .registerPlugins(
        'file:description',
        new FlowrAnalyzerQmdFilePlugin(),
        ['file:rmd', [/.*.rmd/i]]
    )
    .build();
```


This indicates three ways to add a new plugin:

1. By using a predefined name (e.g., `file:description` for the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/file-plugins/flowr-analyzer-description-file-plugin.ts#L17"><code><span title="This plugin provides support for R DESCRIPTION files.">FlowrAnalyzerDescriptionFilePlugin</span></code></a>)\
   These mappings are controlled by the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/plugin-registry.ts#L37"><code><span title="Register a new Flowr Analyzer plugin for the registry, to be used by the FlowrAnalyzerBuilder and FlowrAnalyzer .">registerPluginMaker</span></code></a> function in the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/plugin-registry.ts#L29"><code><span title="The registry of built-in and user-registered Flowr Analyzer plugins. Used by the FlowrAnalyzerBuilder and FlowrAnalyzer to instantiate plugins by name.">PluginRegistry</span></code></a>.
   Under the hood, this relies on <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/plugin-registry.ts#L66"><code><span title="Create a Flowr Analyzer plugin from a PluginToRegister specification.">makePlugin</span></code></a> to create the plugin instance from the name.
2. By providing an already instantiated plugin (e.g., the new <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/file-plugins/notebooks/flowr-analyzer-qmd-file-plugin.ts#L14"><code><span title="The Plugin provides support for Quarto R Markdown (.qmd) files">FlowrAnalyzerQmdFilePlugin</span></code></a> instance).\
   You can pass these by reference, instantiating any class that conforms to the [plugin specification](#Plugins).
3. By providing a tuple of the plugin name and its constructor arguments (e.g., `['file:rmd', [/.*.rmd/i]]` for the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/file-plugins/notebooks/flowr-analyzer-rmd-file-plugin.ts#L15"><code><span title="The Plugin provides support for R Markdown (.rmd) files">FlowrAnalyzerRmdFilePlugin</span></code></a>).\
   This will also use the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/plugin-registry.ts#L66"><code><span title="Create a Flowr Analyzer plugin from a PluginToRegister specification.">makePlugin</span></code></a> function under the hood to create the plugin instance.

Please note, that by passing `false` to the builder constructor, no default plugins are registered (otherwise, all of the plugins in the example above would be registered by default).
If you want to unregister specific plugins, you can use the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L126"><code><span title="Remove one or multiple plugins.">FlowrAnalyzerBuilder::<b>unregisterPlugins</b></span></code></a> method.

For more information on the different plugin types and how to create new plugins, please refer to the [Plugins](#Plugins) section below.

<h3 id="Builder_Reference">Builder Reference</h3>

The builder provides a plethora of methods to configure the resulting analyzer instance:

- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L63"><code><span title="Apply an amendment to the configuration the builder currently holds. Per default, the defaultConfigOptions are used.">FlowrAnalyzerBuilder::<b>amendConfig</b></span></code></a>\
Apply an amendment to the configuration the builder currently holds.
Per default, the
<code>defaultConfigOptions</code>
are used.
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L112"><code><span title="Register one or multiple additional plugins. For the default plugin set, please refer to FlowrAnalyzerPluginDefaults , they can be registered by passing true to the FlowrAnalyzerBuilder constructor.">FlowrAnalyzerBuilder::<b>registerPlugins</b></span></code></a>\
Register one or multiple additional plugins.
For the default plugin set, please refer to
<code>FlowrAnalyzerPluginDefaults</code>
, they can be registered
by passing `true` to the
<code>FlowrAnalyzerBuilder</code>
constructor.
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L72"><code><span title="Overwrite the configuration used by the resulting analyzer.">FlowrAnalyzerBuilder::<b>setConfig</b></span></code></a>\
Overwrite the configuration used by the resulting analyzer.
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L91"><code><span title="Set the engine and hence the parser that will be used by the analyzer. This is an alternative to FlowrAnalyzerBuilder#setParser if you do not have a parser instance at hand.">FlowrAnalyzerBuilder::<b>setEngine</b></span></code></a>\
Set the engine and hence the parser that will be used by the analyzer.
This is an alternative to
<code>FlowrAnalyzerBuilder#setParser</code>
if you do not have a parser instance at hand.
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L100"><code><span title="Additional parameters for the analyses.">FlowrAnalyzerBuilder::<b>setInput</b></span></code></a>\
Additional parameters for the analyses.
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L82"><code><span title="Set the parser instance used by the analyzer. This is an alternative to FlowrAnalyzerBuilder#setEngine if you already have a parser instance. Please be aware, that if you want to parallelize multiple analyzers, there should be separate parser instances.">FlowrAnalyzerBuilder::<b>setParser</b></span></code></a>\
Set the parser instance used by the analyzer.
This is an alternative to
<code>FlowrAnalyzerBuilder#setEngine</code>
if you already have a parser instance.
Please be aware, that if you want to parallelize multiple analyzers, there should be separate parser instances.
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L126"><code><span title="Remove one or multiple plugins.">FlowrAnalyzerBuilder::<b>unregisterPlugins</b></span></code></a>\
Remove one or multiple plugins.

To build the analyzer after you have configured the builder, you can use one of the following:

- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L142"><code><span title="Create the FlowrAnalyzer instance using the given information. Please note that the only reason this is async is that if no parser is set, we need to retrieve the default engine instance which is an async operation. If you set the parser using FlowrAnalyzerBuilder#setParser ,">FlowrAnalyzerBuilder::<b>build</b></span></code></a>\
Create the
<code>FlowrAnalyzer</code>
instance using the given information.
Please note that the only reason this is `async` is that if no parser is set,
we need to retrieve the default engine instance which is an async operation.
If you set the parser using
<code>FlowrAnalyzerBuilder#setParser</code>
,
- <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer-builder.ts#L154"><code><span title="Synchronous version of FlowrAnalyzerBuilder#build , please only use this if you have set the parser using FlowrAnalyzerBuilder#setParser before, otherwise an error will be thrown.">FlowrAnalyzerBuilder::<b>buildSync</b></span></code></a>\
Synchronous version of
<code>FlowrAnalyzerBuilder#build</code>
, please only use this if you have set the parser using
<code>FlowrAnalyzerBuilder#setParser</code>
before, otherwise an error will be thrown.

<h2 id="Plugins">Plugins</h2>

<h3 id="Plugin_Types">Plugin Types</h3>

During the construction of a new <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/flowr-analyzer.ts#L134"><code><span title="Central class for conducting analyses with FlowR. Use the FlowrAnalyzerBuilder to create a new instance.  If you want the original pattern of creating a pipeline and running all steps, you can still do this with FlowrAnalyzer#runFull .  To inspect the context of the analyzer, use FlowrAnalyzer#inspectContext (if you are a plugin and need to modify it, use FlowrAnalyzer#context instead).">FlowrAnalyzer</span></code></a>, plugins of different types are applied at different stages of the analysis.
These plugins are grouped by their <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/flowr-analyzer-plugin.ts#L28"><code><span title="Based on *when* and *what-for* the plugin is applied during the analysis, plugins are categorized into different types.  Consult this diagram for an overview of orders and (implicit or explicit) dependencies:    ┌───────────┐ ┌───────────────────┐ ┌─────────────┐ ┌───────────────┐ ┌───────┐ │ │ │ │ │ │ │ │ │ │ │ *Builder* ├──▶│ Project Discovery ├──▶│ File Loader ├──▶│ Dependencies ├──▶│ *DFA* │ │...">PluginType</span></code></a> and are applied in the following order (as shown in the documentation of the <a href="https://github.com/flowr-analysis/flowr/tree/main//src/project/plugins/flowr-analyzer-plugin.ts#L28"><code><span title="Based on *when* and *what-for* the plugin is applied during the analysis, plugins are categorized into different types.  Consult this diagram for an overview of orders and (implicit or explicit) dependencies:    ┌───────────┐ ┌───────────────────┐ ┌─────────────┐ ┌───────────────┐ ┌───────┐ │ │ │ │ │ │ │ │ │ │ │ *Builder* ├──▶│ Project Discovery ├──▶│ File Loader ├──▶│ Dependencies ├──▶│ *DFA* │ │...">PluginType</span></code></a>):

```text
┌───────────┐   ┌───────────────────┐   ┌─────────────┐   ┌───────────────┐   ┌───────┐
│           │   │                   │   │             │   │               │   │       │
│ *Builder* ├──>│ Project Discovery ├──>│ File Loader ├──>│ Dependencies  ├──>│ *DFA* │
│           │   │  (if necessary)   │   │             │   │   (static)    │   │       │
└───────────┘   └───────────────────┘   └──────┬──────┘   └───────────────┘   └───────┘
                                               │                                  ▲
                                               │          ┌───────────────┐       │
                                               │          │               │       │
                                               └─────────>│ Loading Order ├───────┘
                                                          │               │
                                                          └───────────────┘
```

We describe the different plugin types in more detail below.


<h4 id="Project_Discovery">Project Discovery</h4>

<h4 id="File_Loading">File Loading</h4>

<h4 id="Dependency_Identification">Dependency Identification</h4>

<h4 id="Loading_Order">Loading Order</h4>

<h3 id="How_to_add_a_new_plugin">How to add a new plugin</h3>

<h3 id="How_to_add_a_new_plugin_type">How to add a new plugin type</h3>

<h2 id="Context_Information">Context Information</h2>

<h3 id="Files_Context">Files Context</h3>

<h3 id="Loading_Order_Context">Loading Order Context</h3>

<h3 id="Dependencies_Context">Dependencies Context</h3>

<h3 id="Environment_Context">Environment Context</h3>


<h2 id="Caching">Caching</h2>


<h2 id="Analyzer_Internals">Analyzer Internals</h2>


